<div class="documents-library">
    <div class="documents-library-operation">
        <Breadcrumb separator=">">
            <template v-for="(item,index) in breadcrumbs">
                <BreadcrumbItem :key="index">
                    <Icon v-if="index === 0" @click="handleLink(item)" type="md-folder" size="25" color="rgb(255, 202, 40)" />
                    <a v-else-if="index < breadcrumbs.length-1" @click="handleLink(item)" >{{ item.text }}</a>
                    <span v-else >{{ item.text }}</span>
                </BreadcrumbItem>
            </template>
        </Breadcrumb>
        <ButtonGroup>
            <Button icon="md-apps" :class="Object.is(mode,'chart') ? 'button-active-background' : ''" @click="modeChange('chart')"></Button>
            <Button icon="md-menu" :class="Object.is(mode,'list') ? 'button-active-background' : ''" @click="modeChange('list')"></Button>
        </ButtonGroup>
    </div>
    <div v-show="Object.is(mode, 'chart')" class="documents-library-chart" >
        <template v-for="(item,index) in items">
            <div :key="index" :class="['chart-item','chart-item-'+index]" @mouseleave="hideToolBar(index)" @mouseover="showToolBar(index)">
                <div
                    v-if="Object.is(item.nodeType,'STATIC') || (item.curData && (Object.is(item.curData.doclibtype,'doc') || Object.is(item.curData.docqtype,'module')))"
                    @dblclick="openNode(item)">
                    <Icon type="md-folder" size="70" color="rgb(255, 202, 40)" />
                </div> 
                <div 
                    v-if="item.curData && (Object.is(item.curData.doclibtype,'file') || Object.is(item.curData.docqtype,'doc'))"> 
                    <Icon type="md-document" size="70" color="darkgrey" />
                </div>
                <div>
                    <a
                        v-if="Object.is(item.nodeType,'STATIC') || (item.curData && (Object.is(item.curData.doclibtype,'doc') || Object.is(item.curData.docqtype,'module')))" 
                        @click="openNode(item)">
                        <span>{{ item.text }}</span>
                    </a>
                    <span
                        v-if="item.curData && (Object.is(item.curData.doclibtype,'file') || Object.is(item.curData.docqtype,'doc'))">
                        {{ item.text }}
                    </span>
                </div>
                <div :class="['chart-item-operate','chart-item-operate-'+index]">
                    <div v-if="item.curData && item.curData.copyActionModel">
                        <a 
                            v-for="(actionModel,i) in item.curData.copyActionModel"
                            :key="i"
                            class="chart-item-action" 
                            @click="onAction(item,actionModel.ctrlname,actionModel.name)" 
                            v-show="actionModel.visible"
                            :disabled="actionModel.disabled">
                            <i v-if="actionModel.imgclass" :class="actionModel.imgclass"></i>
                            <span>{{ actionModel.caption }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </template>
    </div>
    <div v-show="Object.is(mode, 'list')" class="documents-library-list">
        <template v-for="(item,index) in items">
            <div :key="index" class="list-item">
                <div>
                    <span
                        v-if="Object.is(item.nodeType,'STATIC') || (item.curData && (Object.is(item.curData.doclibtype,'doc') || Object.is(item.curData.docqtype,'module')))"
                        @click="openNode(item)">
                        <Icon type="md-folder" color="rgb(255, 202, 40)" size="20" /><a>{{ item.text }}</a>
                    </span>
                    <span v-if="item.curData && (Object.is(item.curData.doclibtype,'file') || Object.is(item.curData.docqtype,'doc'))">
                        <Icon type="md-document" color="darkgrey" size="20" />{{ item.text }}
                    </span>
                </div>
                <div v-if="item.curData && item.curData.copyActionModel">
                    <a 
                        v-for="(actionModel,i) in item.curData.copyActionModel"
                        :key="i"
                        class="list-item-action" 
                        @click="onAction(item,actionModel.ctrlname,actionModel.name)" 
                        v-show="actionModel.visible"
                        :disabled="actionModel.disabled">
                        <i v-if="actionModel.imgclass" :class="actionModel.imgclass"></i>
                        <span>{{ actionModel.caption }}</span>
                    </a>
                </div>
            </div>
        </template>
    </div>
</div>