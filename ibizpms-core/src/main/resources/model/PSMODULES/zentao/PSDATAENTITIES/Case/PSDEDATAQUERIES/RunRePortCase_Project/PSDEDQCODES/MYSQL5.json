{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.DELETED = '0'",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "\tt81.TESTREPORTSN = $ { srfwebcontext ( 'srfparentkey', '{\"defname\":\"PATH\",\"dename\":\"ZT_CASE\"}' ) } \n\tAND ( FIND_IN_SET( t1.CASESN, t81.cases ) ) \n\tAND t71.date > t81.`begin` \n\tAND t71.date < CONCAT( DATE_FORMAT( t81.`end`, '%Y-%m-%d' ), ' 23:59:59' )",
    "name" : "查询条件"
  } ],
  "queryCode" : "SELECT\n\tt1.`AUTO`,\n        t1.`id`,\n\tt1.`BRANCH`,\n\tt1.`COLOR`,\n\tt1.`DELETED`,\n\tt1.`FRAME`,\n\tt1.`FREQUENCY`,\n\tt1.`FROMBUG`,\n\tt1.`FROMCASEID`,\n\tt1.`FROMCASEVERSION`,\n\tt1.`HOWRUN`,\n\tt1.`CASESN`,\n\t0 AS `ISFAVORITES`,\n\tt1.`KEYWORDS`,\n\tt1.`LASTEDITEDBY`,\n\tt1.`LASTEDITEDDATE`,\n\tt71.date AS `LASTRUNDATE`,\n\tt71.`LASTRUNNER`,\n\tt71.caseResult AS `LASTRUNRESULT`,\nCASE\n\t\t\n\t\tWHEN t71.caseResult = 'n/a' THEN\n\t\t'忽略' \n\t\tWHEN t71.caseResult = 'pass' THEN\n\t\t'通过' \n\t\tWHEN t71.caseResult = 'fail' THEN\n\t\t'失败' \n\t\tWHEN t71.caseResult = 'blocked' THEN\n\t\t'阻塞' \n\tEND AS `LASTRUNRESULT1`,\n\tt1.`LIB`,\n\tt41.`NAME` AS `LIBNAME`,\n\tt1.`LINKCASE`,\n\tt1.`MODULE`,\n\tt11.`NAME` AS `MODULENAME`,\n\tt1.`OPENEDBY`,\n\tt1.`OPENEDDATE`,\n\tt1.`ORDER`,\n\tt1.`PATH`,\n\tt1.`PRI`,\n\tt1.`PRODUCT`,\n\tt31.`NAME` AS `PRODUCTNAME`,\n\t( SELECT COUNT( 1 ) FROM zt_testresult WHERE `case` = t1.`ID` ) AS `RESULTCNT`,\n\t( SELECT COUNT( 1 ) FROM zt_testresult WHERE `case` = t1.`ID` AND caseResult IN ( 'fail', 'blocked' ) ) AS `RESULTFALICNT`,\n\tt1.`REVIEWEDBY`,\n\tt1.`REVIEWEDDATE`,\n\tt1.`SCRIPTEDBY`,\n\tt1.`SCRIPTEDDATE`,\n\tt1.`SCRIPTLOCATION`,\n\tt1.`SCRIPTSTATUS`,\n\tt1.`STAGE`,\n\tt1.`STATUS`,\n\t( CASE WHEN t1.storyVersion < t21.version AND t21.`status` <> 'changed' THEN 'storychange' ELSE t1.`status` END ) AS `STATUS1`,\n\t( SELECT COUNT( 1 ) FROM zt_casestep WHERE `case` = t1.`ID` AND version = t1.`VERSION` ) AS `STEPCNT`,\n\tt1.`STORY`,\n\tt21.`TITLE` AS `STORYNAME`,\n\tt1.`STORYVERSION`,\n\tt1.`SUBSTATUS`,\n\tt1.`TITLE`,\n\t( SELECT COUNT( 1 ) FROM zt_bug WHERE `case` = t1.`ID` ) AS `TOBUGCNT`,\n\tt1.`TYPE`,\n\tt1.`VERSION` \nFROM\n\t`zt_case` t1\n\tLEFT JOIN zt_module t11 ON t1.MODULE = t11.ID\n\tLEFT JOIN zt_story t21 ON t1.STORY = t21.ID\n\tLEFT JOIN zt_product t31 ON t1.PRODUCT = t31.ID\n\tLEFT JOIN zt_testsuite t41 ON t1.LIB = t41.ID\n\tLEFT JOIN zt_testrun t61 ON t61.`case` = t1.ID\n\tLEFT JOIN zt_testresult t71 ON t61.ID = t71.run \n\tAND t71.`case` = t1.ID\n\tINNER JOIN zt_testreport t81 ON FIND_IN_SET( t61.task, t81.tasks )",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Case/PSDEDATAQUERIES/RunRePortCase_Project/PSDEDQCODES/MYSQL5.json"
}