{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.DELETED = '0'",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "( t1.id = #{srf.datacontext.frombug} )",
    "name" : "查询条件"
  } ],
  "getPSDEDataQueryCodeExps" : [ {
    "expression" : "t1.`STEPS`",
    "name" : "STEPS"
  }, {
    "expression" : "t1.`ACTIVATEDCOUNT`",
    "name" : "ACTIVATEDCOUNT"
  }, {
    "expression" : "t1.`ACTIVATEDDATE`",
    "name" : "ACTIVATEDDATE"
  }, {
    "expression" : "t1.`ASSIGNEDDATE`",
    "name" : "ASSIGNEDDATE"
  }, {
    "expression" : "t1.`ASSIGNEDTO`",
    "name" : "ASSIGNEDTO"
  }, {
    "expression" : "t1.`BRANCH`",
    "name" : "BRANCH"
  }, {
    "expression" : "t21.`NAME`",
    "name" : "BRANCHNAME"
  }, {
    "expression" : "t1.`BROWSER`",
    "name" : "BROWSER"
  }, {
    "expression" : "t1.`BUGSN`",
    "name" : "BUGSN"
  }, {
    "expression" : "t1.`CASE`",
    "name" : "CASE"
  }, {
    "expression" : "t41.`TITLE`",
    "name" : "CASENAME"
  }, {
    "expression" : "t1.`CASEVERSION`",
    "name" : "CASEVERSION"
  }, {
    "expression" : "t1.`CLOSEDBY`",
    "name" : "CLOSEDBY"
  }, {
    "expression" : "t1.`CLOSEDDATE`",
    "name" : "CLOSEDDATE"
  }, {
    "expression" : "t1.`COLOR`",
    "name" : "COLOR"
  }, {
    "expression" : "t1.`CONFIRMED`",
    "name" : "CONFIRMED"
  }, {
    "expression" : "t1.`CREATEMAN`",
    "name" : "CREATEMAN"
  }, {
    "expression" : "t1.`DEADLINE`",
    "name" : "DEADLINE"
  }, {
    "expression" : "(case when t1.deadline is null or t1.deadline = '0000-00-00' or t1.deadline = '1970-01-01' then '' when t1.`status` ='active' and t1.deadline <DATE_FORMAT(now(),'%y-%m-%d')  then CONCAT_WS('','延期',TIMESTAMPDIFF(DAY, t1.deadline, now()),'天') else '' end)",
    "name" : "DELAY"
  }, {
    "expression" : "( CASE WHEN t1.deadline IS NULL  OR t1.deadline = '0000-00-00'  OR t1.deadline = '1970-01-01' THEN ''  WHEN t1.`status` = 'resolved'  AND t1.deadline < DATE_FORMAT( t1.resolvedDate, '%y-%m-%d' ) THEN CONCAT_WS( '', '延期', TIMESTAMPDIFF( DAY, t1.deadline, t1.resolvedDate ), '天' ) ELSE ''  END )",
    "name" : "DELAYRESOLVE"
  }, {
    "expression" : "t1.`DELETED`",
    "name" : "DELETED"
  }, {
    "expression" : "t1.`DEPT`",
    "name" : "DEPT"
  }, {
    "expression" : "t1.`DEPTNAME`",
    "name" : "DEPTNAME"
  }, {
    "expression" : "t1.`DUPLICATEBUG`",
    "name" : "DUPLICATEBUG"
  }, {
    "expression" : "t1.`ENTRY`",
    "name" : "ENTRY"
  }, {
    "expression" : "t1.`FOUND`",
    "name" : "FOUND"
  }, {
    "expression" : "t1.`HARDWARE`",
    "name" : "HARDWARE"
  }, {
    "expression" : "t1.`ID`",
    "name" : "ID"
  }, {
    "expression" : "0",
    "name" : "ISFAVORITES"
  }, {
    "expression" : "t1.`KEYWORDS`",
    "name" : "KEYWORDS"
  }, {
    "expression" : "t1.`LASTEDITEDBY`",
    "name" : "LASTEDITEDBY"
  }, {
    "expression" : "t1.`LASTEDITEDDATE`",
    "name" : "LASTEDITEDDATE"
  }, {
    "expression" : "t1.`LINES`",
    "name" : "LINES"
  }, {
    "expression" : "t1.`LINKBUG`",
    "name" : "LINKBUG"
  }, {
    "expression" : "t1.`MAILTO`",
    "name" : "MAILTO"
  }, {
    "expression" : "''",
    "name" : "MAILTOPK"
  }, {
    "expression" : "t1.`MODULE`",
    "name" : "MODULE"
  }, {
    "expression" : "t71.`NAME`",
    "name" : "MODULENAME"
  }, {
    "expression" : "(case when t1.module = '0' then '/' else (SELECT GROUP_CONCAT( tt.NAME SEPARATOR '>' )  FROM zt_module tt WHERE FIND_IN_SET( tt.id, t71.path )  and tt.deleted = '0'  AND tt.type = 'story'  GROUP BY tt.root limit 0,1) end)",
    "name" : "MODULENAME1"
  }, {
    "expression" : "t1.`OPENEDBUILD`",
    "name" : "OPENEDBUILD"
  }, {
    "expression" : "t1.`OPENEDBY`",
    "name" : "OPENEDBY"
  }, {
    "expression" : "t1.`OPENEDDATE`",
    "name" : "OPENEDDATE"
  }, {
    "expression" : "t1.`ORG`",
    "name" : "ORG"
  }, {
    "expression" : "t1.`ORGNAME`",
    "name" : "ORGNAME"
  }, {
    "expression" : "t1.`OS`",
    "name" : "OS"
  }, {
    "expression" : "(case when t1.DEADLINE = '0000-00-00' then 0 else datediff(t1.deadline, now() ) end)",
    "name" : "OVERDUEBUGS"
  }, {
    "expression" : "t1.`PLAN`",
    "name" : "PLAN"
  }, {
    "expression" : "t1.`PRI`",
    "name" : "PRI"
  }, {
    "expression" : "t1.`PRODUCT`",
    "name" : "PRODUCT"
  }, {
    "expression" : "t11.`name`",
    "name" : "PRODUCTNAME"
  }, {
    "expression" : "t1.`PROJECT`",
    "name" : "PROJECT"
  }, {
    "expression" : "t51.`NAME`",
    "name" : "PROJECTNAME"
  }, {
    "expression" : "t1.`REPO`",
    "name" : "REPO"
  }, {
    "expression" : "t1.`REPOTYPE`",
    "name" : "REPOTYPE"
  }, {
    "expression" : "t1.`RESOLUTION`",
    "name" : "RESOLUTION"
  }, {
    "expression" : "t1.`RESOLVEDBUILD`",
    "name" : "RESOLVEDBUILD"
  }, {
    "expression" : "t1.`RESOLVEDBY`",
    "name" : "RESOLVEDBY"
  }, {
    "expression" : "t1.`RESOLVEDDATE`",
    "name" : "RESOLVEDDATE"
  }, {
    "expression" : "t1.`RESULT`",
    "name" : "RESULT"
  }, {
    "expression" : "t1.`SEVERITY`",
    "name" : "SEVERITY"
  }, {
    "expression" : "t1.`STATUS`",
    "name" : "STATUS"
  }, {
    "expression" : "t1.`STORY`",
    "name" : "STORY"
  }, {
    "expression" : "t61.`TITLE`",
    "name" : "STORYNAME"
  }, {
    "expression" : "t1.`STORYVERSION`",
    "name" : "STORYVERSION"
  }, {
    "expression" : "t1.`SUBSTATUS`",
    "name" : "SUBSTATUS"
  }, {
    "expression" : "t1.`TASK`",
    "name" : "TASK"
  }, {
    "expression" : "t31.`NAME`",
    "name" : "TASKNAME"
  }, {
    "expression" : "t1.`TESTTASK`",
    "name" : "TESTTASK"
  }, {
    "expression" : "t1.`TITLE`",
    "name" : "TITLE"
  }, {
    "expression" : "t1.`TOSTORY`",
    "name" : "TOSTORY"
  }, {
    "expression" : "t1.`TOTASK`",
    "name" : "TOTASK"
  }, {
    "expression" : "t1.`TYPE`",
    "name" : "TYPE"
  }, {
    "expression" : "t1.`UPDATEMAN`",
    "name" : "UPDATEMAN"
  }, {
    "expression" : "t1.`V1`",
    "name" : "V1"
  }, {
    "expression" : "t1.`V2`",
    "name" : "V2"
  } ],
  "queryCode" : "SELECT\nt1.`ACTIVATEDCOUNT`,\nt1.`ACTIVATEDDATE`,\nt1.`ASSIGNEDDATE`,\nt1.`ASSIGNEDTO`,\nt1.`BRANCH`,\nt21.`NAME` AS `BRANCHNAME`,\nt1.`BROWSER`,\nt1.`BUGSN`,\nt1.`CASE`,\nt41.`TITLE` AS `CASENAME`,\nt1.`CASEVERSION`,\nt1.`CLOSEDBY`,\nt1.`CLOSEDDATE`,\nt1.`COLOR`,\nt1.`CONFIRMED`,\nt1.`CREATEMAN`,\nt1.`DEADLINE`,\n(case when t1.deadline is null or t1.deadline = '0000-00-00' or t1.deadline = '1970-01-01' then '' when t1.`status` ='active' and t1.deadline <DATE_FORMAT(now(),'%y-%m-%d')  then CONCAT_WS('','延期',TIMESTAMPDIFF(DAY, t1.deadline, now()),'天') else '' end) AS `DELAY`,\n( CASE WHEN t1.deadline IS NULL  OR t1.deadline = '0000-00-00'  OR t1.deadline = '1970-01-01' THEN ''  WHEN t1.`status` = 'resolved'  AND t1.deadline < DATE_FORMAT( t1.resolvedDate, '%y-%m-%d' ) THEN CONCAT_WS( '', '延期', TIMESTAMPDIFF( DAY, t1.deadline, t1.resolvedDate ), '天' ) ELSE ''  END ) AS `DELAYRESOLVE`,\nt1.`DELETED`,\nt1.`DEPT`,\nt1.`DEPTNAME`,\nt1.`DUPLICATEBUG`,\nt1.`ENTRY`,\nt1.`FOUND`,\nt1.`HARDWARE`,\nt1.`ID`,\n0 AS `ISFAVORITES`,\nt1.`KEYWORDS`,\nt1.`LASTEDITEDBY`,\nt1.`LASTEDITEDDATE`,\nt1.`LINES`,\nt1.`LINKBUG`,\nt1.`MAILTO`,\n'' AS `MAILTOPK`,\nt1.`MODULE`,\nt71.`NAME` AS `MODULENAME`,\n(case when t1.module = '0' then '/' else (SELECT GROUP_CONCAT( tt.NAME SEPARATOR '>' )  FROM zt_module tt WHERE FIND_IN_SET( tt.id, t71.path )  and tt.deleted = '0'  AND tt.type = 'story'  GROUP BY tt.root limit 0,1) end) AS `MODULENAME1`,\nt1.`OPENEDBUILD`,\nt1.`OPENEDBY`,\nt1.`OPENEDDATE`,\nt1.`ORG`,\nt1.`ORGNAME`,\nt1.`OS`,\n(case when t1.DEADLINE = '0000-00-00' then 0 else datediff(t1.deadline, now() ) end) AS `OVERDUEBUGS`,\nt1.`PLAN`,\nt1.`PRI`,\nt1.`PRODUCT`,\nt11.`name` AS `PRODUCTNAME`,\nt1.`PROJECT`,\nt51.`NAME` AS `PROJECTNAME`,\nt1.`REPO`,\nt1.`REPOTYPE`,\nt1.`RESOLUTION`,\nt1.`RESOLVEDBUILD`,\nt1.`RESOLVEDBY`,\nt1.`RESOLVEDDATE`,\nt1.`RESULT`,\nt1.`SEVERITY`,\nt1.`STATUS`,\nt1.`STORY`,\nt61.`TITLE` AS `STORYNAME`,\nt1.`STORYVERSION`,\nt1.`SUBSTATUS`,\nt1.`TASK`,\nt31.`NAME` AS `TASKNAME`,\nt1.`TESTTASK`,\nt1.`TITLE`,\nt1.`TOSTORY`,\nt1.`TOTASK`,\nt1.`TYPE`,\nt1.`UPDATEMAN`,\nt1.`V1`,\nt1.`V2`\nFROM `zt_bug` t1 \nLEFT JOIN `zt_product` t11 ON t1.`PRODUCT` = t11.`id` \nLEFT JOIN `zt_branch` t21 ON t1.`BRANCH` = t21.`ID` \nLEFT JOIN `zt_task` t31 ON t1.`TASK` = t31.`ID` \nLEFT JOIN `zt_case` t41 ON t1.`CASE` = t41.`ID` \nLEFT JOIN `zt_project` t51 ON t1.`PROJECT` = t51.`ID` \nLEFT JOIN `zt_story` t61 ON t1.`STORY` = t61.`ID` \nLEFT JOIN `zt_module` t71 ON t1.`MODULE` = t71.`ID` \n",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Bug/PSDEDATAQUERIES/StoryFormBug/PSDEDQCODES/MYSQL5.json"
}