{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "NOT (\n\t\t\tEXISTS (\n\t\t\tSELECT\n\t\t\t\t* \n\t\t\tFROM\n\t\t\t\tzt_testrun t41 \n\t\t\tWHERE\n\t\t\t\tt1.ID = t41.`CASE` \n\t\t\t\tAND ( t41.`task` = $ { srfwebcontext ( 'task', '{\"defname\":\"TASK\",\"dename\":\"ZT_TESTRUN\"}' ) } ) \n\t\t\t) \n\t)",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "t1.DELETED = '0'",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "\t\tt1.product IN (\n\t\tSELECT\n\t\t\ttt.product \n\t\tFROM\n\t\t\tzt_testtask t\n\t\t\tLEFT JOIN zt_projectproduct tt ON tt.project = t.project \n\t\tWHERE\n\t\t\tt.ID = $ { srfwebcontext ( 'task', '{\"defname\":\"TASK\",\"dename\":\"ZT_TESTRUN\"}' ) } \n\t\t)",
    "name" : "查询条件"
  } ],
  "queryCode" : "SELECT\n\tt1.`AUTO`,\n        t1.`id`,\n\tt1.`BRANCH`,\n\tt1.`COLOR`,\n\tt1.`DELETED`,\n\tt1.`FRAME`,\n\tt1.`FREQUENCY`,\n\tt1.`FROMBUG`,\n\tt1.`FROMCASEID`,\n\tt1.`FROMCASEVERSION`,\n\tt1.`HOWRUN`,\n\tt1.`CASESN`,\n\t(\n\tSELECT\n\t\t( CASE WHEN COUNT( t.IBZ_FAVORITESID ) > 0 THEN 1 ELSE 0 END ) AS ISFAVORITES \n\tFROM\n\t\tT_IBZ_FAVORITES t \n\tWHERE\n\t\tt.TYPE = 'case' \n\t\tAND t.ACCOUNT = #{srf.sessioncontext.srfloginname} and t.OBJECTID = t1.id) AS `ISFAVORITES`,\n\t\tt1.`KEYWORDS`,\n\t\tt1.`LASTEDITEDBY`,\n\t\tt1.`LASTEDITEDDATE`,\n\t\tt1.`LASTRUNDATE`,\n\t\tt1.`LASTRUNNER`,\n\t\tt1.`LASTRUNRESULT`,\n\t\t( CASE WHEN t1.`LASTRUNRESULT` = '' OR t1.`LASTRUNRESULT` IS NULL THEN 'no' ELSE t1.`LASTRUNRESULT` END ) AS `LASTRUNRESULT1`,\n\t\tt1.`LIB`,\n\t\tt1.`LINKCASE`,\n\t\tt1.`MODULE`,\n\t\tt11.`NAME` AS `MODULENAME`,\n\t\tt1.`OPENEDBY`,\n\t\tt1.`OPENEDDATE`,\n\t\tt1.`ORDER`,\n\t\tt1.`PATH`,\n\t\tt1.`PRI`,\n\t\tt1.`PRODUCT`,\n\t\tt31.`NAME` AS `PRODUCTNAME`,\n\t\t( SELECT COUNT( 1 ) FROM zt_testresult WHERE `case` = t1.`id` ) AS `RESULTCNT`,\n\t\t( SELECT COUNT( 1 ) FROM zt_testresult WHERE `case` = t1.`id` AND caseResult IN ( 'fail', 'blocked' ) ) AS `RESULTFALICNT`,\n\t\tt1.`REVIEWEDBY`,\n\t\tt1.`REVIEWEDDATE`,\n\t\tt1.`SCRIPTEDBY`,\n\t\tt1.`SCRIPTEDDATE`,\n\t\tt1.`SCRIPTLOCATION`,\n\t\tt1.`SCRIPTSTATUS`,\n\t\tt1.`STAGE`,\n\t\tt1.`STATUS`,\n\t\t( CASE WHEN t1.storyVersion < t21.version AND t21.`status` <> 'changed' THEN 'storychange' ELSE t1.`status` END ) AS `STATUS1`,\n\t\t( SELECT COUNT( 1 ) FROM zt_casestep WHERE `case` = t1.`id` AND version = t1.`VERSION` ) AS `STEPCNT`,\n\t\tt1.`STORY`,\n\t\tt21.`TITLE` AS `STORYNAME`,\n\t\tt1.`STORYVERSION`,\n\t\tt1.`SUBSTATUS`,\n\t\tt1.`TITLE`,\n\t\t( SELECT COUNT( 1 ) FROM zt_bug WHERE `case` = t1.`id` ) AS `TOBUGCNT`,\n\t\tt1.`TYPE`,\n\t\tt1.`VERSION` \n\tFROM\n\t\t`zt_case` t1\n\t\tLEFT JOIN zt_module t11 ON t1.MODULE = t11.id\n\t\tLEFT JOIN zt_story t21 ON t1.STORY = t21.id\n\t\tLEFT JOIN zt_product t31 ON t1.PRODUCT = t31.id",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Case/PSDEDATAQUERIES/NotCurTestTaskProject/PSDEDQCODES/MYSQL5.json"
}