{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.type = 'project'  AND t1.deleted = '0'",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "t1.project = #{srf.datacontext.project}",
    "name" : "查询条件"
  } ],
  "queryCode" : "select t1.* from (SELECT\n\t( CASE WHEN FIND_IN_SET( #{srf.sessioncontext.srfloginname}, t1.collector ) > 0 THEN 1 ELSE 0 END ) AS `ISFAVOURITES`,\n\tt1.`ACL`,\n\tt1.`DELETED`,\n\tt1.`GROUPS`,\n\tt1.`ID`,\n\tt1.`MAIN`,\n\tt1.`NAME`,\n\tt1.`ORDER`,\n\tt1.`PRODUCT`,\n\tt1.`PROJECT`,\n\tt1.`TYPE` ,\n        'doc' as DOCLIBTYPE,\n\t(select count(1) from zt_doc t where t.lib = t1.id and t.project = t1.project and t.deleted = '0') as DOCCNT,t1.DOCLIBSN\nFROM\n\t`zt_doclib` t1 \n\t\n\tUNION\n\tSELECT\n\t0 AS `ISFAVOURITES`,\n\t'default' as `ACL`,\n\t'0' as `DELETED`,\n\t'' as `GROUPS`,\n\t0 as `ID`,\n\t0 as `MAIN`,\n\t'附件库' as `NAME`,\n\t0 as `ORDER`,\n\t0 as `PRODUCT`,\n\t#{srf.datacontext.project} as `PROJECT`,\n\t'project' as `TYPE` ,\n        'file' as DOCLIBTYPE,\n\t(select count(1) from zt_file t where ((t.objectType ='project' and t.objectID = #{srf.datacontext.project}) or (t.objectType = 'task' and exists(select 1 from zt_task tt where tt.id = t.objectID and tt.project = #{srf.datacontext.project} and tt.deleted = '0')) or (t.objectType = 'build' and exists(select 1 from zt_build tt where tt.id = t.objectID and tt.project = #{srf.datacontext.project} and tt.deleted = '0')) or (t.objectType = 'doc' and EXISTS(select 1 from zt_doc tt where tt.id = t.objectID and tt.project = #{srf.datacontext.project} and tt.deleted = '0'))) and t.deleted = '0') as DOCCNT, 0 as DOCLIBSN\nFROM\n\tdual  ) t1",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/DocLib/PSDEDATAQUERIES/ByProject/PSDEDQCODES/MYSQL5.json"
}