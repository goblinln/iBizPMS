{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "queryCode" : "select  t1.lastRunResult1,t1.product,t1.RESULTCNT as RESULTCNT, CONCAT(ROUND(t1.RESULTCNT / t1.sss * 100, 2),'','%') as TASK from (SELECT\n\tt1.*,\n\t(\nSELECT\n\tcount( 1 ) \nFROM\n\t(\nSELECT\n\nCASE\n\t\nWHEN\n\tt71.caseResult = 'n/a' THEN\n\t'忽略' \nWHEN t71.caseResult = 'pass' THEN\n'通过' \nWHEN t71.caseResult = 'fail' THEN\n'失败' \nWHEN t71.caseResult = 'blocked' THEN\n'阻塞' \nEND AS `LASTRUNRESULT1` \nFROM\n\t`zt_case` t1\n\tLEFT JOIN zt_testrun t61 ON t61.`case` = t1.ID\n\tLEFT JOIN zt_testresult t71 ON t61.ID = t71.run \n\tAND t71.`case` = t1.ID \nWHERE\n\tt1.DELETED = '0' \n\tAND ( FIND_IN_SET( t1.ID, ( SELECT tt.cases FROM zt_testreport tt WHERE tt.ID = ${srfwebcontext('srfparentkey','{\"defname\":\"PATH\",\"dename\":\"ZT_CASE\"}')} ) ) ) \n\tAND t61.task = ( SELECT tt.tasks FROM zt_testreport tt WHERE tt.ID = ${srfwebcontext('srfparentkey','{\"defname\":\"PATH\",\"dename\":\"ZT_CASE\"}')} ) \n\t) tt1 \n\t) AS sss \nFROM\n\t(\n\tSELECT\n\t\tt1.LASTRUNRESULT1,\nt1.product,\n\t\tcount( t1.LASTRUNRESULT1 ) AS RESULTCNT \n\tFROM\n\t\t(\n\t\tSELECT\nt1.product,\n\t\tCASE\n\t\t\t\t\n\t\t\tWHEN\n\t\t\t\tt71.caseResult = 'n/a' THEN\n\t\t\t\t\t'忽略' \n\t\t\t\t\tWHEN t71.caseResult = 'pass' THEN\n\t\t\t\t\t'通过' \n\t\t\t\t\tWHEN t71.caseResult = 'fail' THEN\n\t\t\t\t\t'失败' \n\t\t\t\t\tWHEN t71.caseResult = 'blocked' THEN\n\t\t\t\t\t'阻塞' \n\t\t\t\tEND AS `LASTRUNRESULT1` \n\t\t\tFROM\n\t\t\t\t`zt_case` t1\n\t\t\t\tLEFT JOIN zt_testrun t61 ON t61.`case` = t1.ID\n\t\t\t\tLEFT JOIN zt_testresult t71 ON t61.ID = t71.run \n\t\t\t\tAND t71.`case` = t1.ID \n\t\t\tWHERE\n\t\t\t\tt1.DELETED = '0' \n\t\t\t\tAND ( FIND_IN_SET( t1.ID, ( SELECT tt.cases FROM zt_testreport tt WHERE tt.ID = ${srfwebcontext('srfparentkey','{\"defname\":\"PATH\",\"dename\":\"ZT_CASE\"}')} ) ) ) \n\t\t\t\tAND t61.task = ( SELECT tt.tasks FROM zt_testreport tt WHERE tt.ID = ${srfwebcontext('srfparentkey','{\"defname\":\"PATH\",\"dename\":\"ZT_CASE\"}')} ) \n\t\t\t) t1 \n\t\tGROUP BY\n\t\tt1.LASTRUNRESULT1 \n) t1) t1",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Case/PSDEDATAQUERIES/RunRePortCaseEntry/PSDEDQCODES/MYSQL5.json"
}