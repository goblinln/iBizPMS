{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t41.`TASK` = ${srfdatacontext('srfparentkey','{\"defname\":\"TASK\",\"dename\":\"ZT_TESTRUN\"}')}",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "t1.DELETED = '0'",
    "name" : "查询条件"
  } ],
  "getPSDEDataQueryCodeExps" : [ {
    "expression" : "t1.`PRECONDITION`",
    "name" : "PRECONDITION"
  }, {
    "expression" : "t1.`AUTO`",
    "name" : "AUTO"
  }, {
    "expression" : "t1.`BRANCH`",
    "name" : "BRANCH"
  }, {
    "expression" : "t1.`COLOR`",
    "name" : "COLOR"
  }, {
    "expression" : "t1.`DELETED`",
    "name" : "DELETED"
  }, {
    "expression" : "t1.`FRAME`",
    "name" : "FRAME"
  }, {
    "expression" : "t1.`FREQUENCY`",
    "name" : "FREQUENCY"
  }, {
    "expression" : "t1.`FROMBUG`",
    "name" : "FROMBUG"
  }, {
    "expression" : "t1.`FROMCASEID`",
    "name" : "FROMCASEID"
  }, {
    "expression" : "t1.`FROMCASEVERSION`",
    "name" : "FROMCASEVERSION"
  }, {
    "expression" : "t1.`HOWRUN`",
    "name" : "HOWRUN"
  }, {
    "expression" : "t1.`ID`",
    "name" : "ID"
  }, {
    "expression" : "t1.`KEYWORDS`",
    "name" : "KEYWORDS"
  }, {
    "expression" : "t1.`LASTEDITEDBY`",
    "name" : "LASTEDITEDBY"
  }, {
    "expression" : "t1.`LASTEDITEDDATE`",
    "name" : "LASTEDITEDDATE"
  }, {
    "expression" : "t1.`LASTRUNDATE`",
    "name" : "LASTRUNDATE"
  }, {
    "expression" : "t1.`LASTRUNNER`",
    "name" : "LASTRUNNER"
  }, {
    "expression" : "t1.`LASTRUNRESULT`",
    "name" : "LASTRUNRESULT"
  }, {
    "expression" : "t1.`LIB`",
    "name" : "LIB"
  }, {
    "expression" : "t1.`LINKCASE`",
    "name" : "LINKCASE"
  }, {
    "expression" : "t1.`MODULE`",
    "name" : "MODULE"
  }, {
    "expression" : "t11.`NAME`",
    "name" : "MODULENAME"
  }, {
    "expression" : "t1.`OPENEDBY`",
    "name" : "OPENEDBY"
  }, {
    "expression" : "t1.`OPENEDDATE`",
    "name" : "OPENEDDATE"
  }, {
    "expression" : "t1.`ORDER`",
    "name" : "ORDER"
  }, {
    "expression" : "t1.`PATH`",
    "name" : "PATH"
  }, {
    "expression" : "t1.`PRI`",
    "name" : "PRI"
  }, {
    "expression" : "t1.`PRODUCT`",
    "name" : "PRODUCT"
  }, {
    "expression" : "t31.`NAME`",
    "name" : "PRODUCTNAME"
  }, {
    "expression" : "t1.`REVIEWEDBY`",
    "name" : "REVIEWEDBY"
  }, {
    "expression" : "t1.`REVIEWEDDATE`",
    "name" : "REVIEWEDDATE"
  }, {
    "expression" : "t1.`SCRIPTEDBY`",
    "name" : "SCRIPTEDBY"
  }, {
    "expression" : "t1.`SCRIPTEDDATE`",
    "name" : "SCRIPTEDDATE"
  }, {
    "expression" : "t1.`SCRIPTLOCATION`",
    "name" : "SCRIPTLOCATION"
  }, {
    "expression" : "t1.`SCRIPTSTATUS`",
    "name" : "SCRIPTSTATUS"
  }, {
    "expression" : "t1.`STAGE`",
    "name" : "STAGE"
  }, {
    "expression" : "t1.`STATUS`",
    "name" : "STATUS"
  }, {
    "expression" : "t1.`STORY`",
    "name" : "STORY"
  }, {
    "expression" : "t21.`TITLE`",
    "name" : "STORYNAME"
  }, {
    "expression" : "t1.`STORYVERSION`",
    "name" : "STORYVERSION"
  }, {
    "expression" : "t1.`SUBSTATUS`",
    "name" : "SUBSTATUS"
  }, {
    "expression" : "t1.`TITLE`",
    "name" : "TITLE"
  }, {
    "expression" : "t1.`TYPE`",
    "name" : "TYPE"
  }, {
    "expression" : "t1.`VERSION`",
    "name" : "VERSION"
  } ],
  "queryCode" : "SELECT\n\tt1.`AUTO`,\n        t1.`id`,\n\tt1.`BRANCH`,\n\tt1.`COLOR`,\n\tt1.`DELETED`,\n\tt1.`FRAME`,\n\tt1.`FREQUENCY`,\n\tt1.`FROMBUG`,\n\tt1.`FROMCASEID`,\n\tt1.`FROMCASEVERSION`,\n\tt1.`HOWRUN`,\n\tt1.`CASESN`,\n\t(\n\tSELECT\n\t\t( CASE WHEN COUNT( t.IBZ_FAVORITESID ) > 0 THEN 1 ELSE 0 END ) AS ISFAVORITES \n\tFROM\n\t\tT_IBZ_FAVORITES t \n\tWHERE\n\t\tt.TYPE = 'case' \n\t\tAND t.ACCOUNT = #{srf.sessioncontext.srfloginname} and t.OBJECTID = t1.ID) AS `ISFAVORITES`,\n\t\tt1.`KEYWORDS`,\n\t\tt1.`LASTEDITEDBY`,\n\t\tt1.`LASTEDITEDDATE`,\n\t\tt41.`LASTRUNDATE`,\n\t\tt41.`LASTRUNNER`,\n\t\tt41.`LASTRUNRESULT`,\n\t\t(\n\t\tCASE\n\t\t\t\t\n\t\t\t\tWHEN (\n\t\t\t\tSELECT\n\t\t\t\t\tcount( 1 ) \n\t\t\t\tFROM\n\t\t\t\t\tzt_testresult tt \n\t\t\t\tWHERE\n\t\t\t\t\ttt.`case` = t1.ID\n\t\t\t\t\tAND tt.run = t41.ID\n\t\t\t\t\tAND tt.caseResult = 'fail' \n\t\t\t\t\t) > 0 THEN\n\t\t\t\t\t'fail' \n\t\t\t\t\tWHEN t41.`LASTRUNRESULT` = '' \n\t\t\t\t\tOR t41.`LASTRUNRESULT` IS NULL THEN\n\t\t\t\t\t\t'no' ELSE t41.`LASTRUNRESULT` \n\t\t\t\t\tEND \n\t\t\t\t\t) AS `LASTRUNRESULT1`,\n\t\t\t\t\tt1.`LIB`,\n\t\t\t\t\tt1.`LINKCASE`,\n\t\t\t\t\tt1.`MODULE`,\n\t\t\t\t\tt11.`NAME` AS `MODULENAME`,\n\t\t\t\t\tt1.`OPENEDBY`,\n\t\t\t\t\tt1.`OPENEDDATE`,\n\t\t\t\t\tt1.`ORDER`,\n\t\t\t\t\tt1.`PATH`,\n\t\t\t\t\tt1.`PRI`,\n\t\t\t\t\tt1.`PRODUCT`,\n\t\t\t\t\tt31.`NAME` AS `PRODUCTNAME`,\n\t\t\t\t\tt1.`REVIEWEDBY`,\n\t\t\t\t\tt1.`REVIEWEDDATE`,\n\t\t\t\t\tt1.`SCRIPTEDBY`,\n\t\t\t\t\tt1.`SCRIPTEDDATE`,\n\t\t\t\t\tt1.`SCRIPTLOCATION`,\n\t\t\t\t\tt1.`SCRIPTSTATUS`,\n\t\t\t\t\tt1.`STAGE`,\n\t\t\t\t\tt1.`STATUS`,\n\t\t\t\t\tt1.`STORY`,\n\t\t\t\t\tt21.`TITLE` AS `STORYNAME`,\n\t\t\t\t\tt1.`STORYVERSION`,\n\t\t\t\t\tt1.`SUBSTATUS`,\n\t\t\t\t\tt1.`TITLE`,\n\t\t\t\t\tt1.`TYPE`,\n\t\t\t\t\tt41.task AS task,\n\t\t\t\t\tt1.`VERSION`,\n\t\t\t\t\tt41.assignedTo AS assignedTo,\n\t\t\t\t\t( CASE WHEN t1.version > t41.version THEN 'casechange' ELSE t41.`status` END ) AS `status1` \n\t\t\t\tFROM\n\t\t\t\t\t`zt_case` t1\n\t\t\t\t\tLEFT JOIN zt_module t11 ON t1.MODULE = t11.ID\n\t\t\t\t\tLEFT JOIN zt_story t21 ON t1.STORY = t21.ID\n\t\t\t\t\tLEFT JOIN zt_product t31 ON t1.PRODUCT = t31.ID\n\t\t\t\t\tLEFT JOIN zt_testrun t41 ON t1.ID= t41.`case`",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Case/PSDEDATAQUERIES/CurTestTask/PSDEDQCODES/MYSQL5.json"
}