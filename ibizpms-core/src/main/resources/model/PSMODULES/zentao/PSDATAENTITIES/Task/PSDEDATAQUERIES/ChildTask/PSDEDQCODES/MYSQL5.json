{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.DELETED = '0'",
    "name" : "查询条件"
  }, {
    "condType" : "CUSTOM",
    "customCond" : "( 1<>1 )",
    "name" : "查询条件"
  } ],
  "queryCode" : "SELECT\n\tt1.id,\n\tt1.`ASSIGNEDDATE`,\n\tt1.`ASSIGNEDTO`,\n\tt1.`CANCELEDBY`,\n\tt1.`CANCELEDDATE`,\n\tt1.`CLOSEDBY`,\n\tt1.`CLOSEDDATE`,\n\tt1.`CLOSEDREASON`,\n\tt1.`COLOR`,\n\tt1.`CONSUMED`,\n\tt1.`DEADLINE`,\n\t(\nCASE\n\t\n\tWHEN t1.deadline IS NULL \n\tOR t1.deadline = '0000-00-00' \n\tOR t1.deadline = '1970-01-01' THEN\n\t'' \nWHEN t1.`status` IN ( 'wait', 'doing' ) \n\tAND t1.deadline < DATE_FORMAT( now( ), '%y-%m-%d' ) THEN\n\t\tCONCAT_WS( '', '延期', TIMESTAMPDIFF( DAY, t1.deadline, now( ) ), '天' ) ELSE '' \n\tEND \n\t) AS `DELAY`,\n\tt1.`DELETED`,\n\t( To_Days( t1.`DEADLINE` ) - To_Days( t1.`ESTSTARTED` ) ) AS `DURATION`,\n\tt1.`ESTIMATE`,\n\tt1.`ESTSTARTED`,\n\tt1.`FINISHEDBY`,\n\tt1.`FINISHEDDATE`,\n\tt1.`FROMBUG`,\n\tt1.`TASKSN`,\n\t0 AS `ISFAVORITES`,\n\t( CASE WHEN t1.parent > 0 THEN TRUE ELSE FALSE END ) AS `ISLEAF`,\n\tt1.`LASTEDITEDBY`,\n\tt1.`LASTEDITEDDATE`,\n\tt1.`LEFT`,\n\tt1.`MAILTO`,\n\t'' AS `MAILTOPK`,\n\tt1.`MODULE`,\n\tt11.`NAME` AS `MODULENAME`,\n\t(\n\tCASE\n\t\t\t\n\t\t\tWHEN t1.module = '0' THEN\n\t\t\t'/' ELSE (\n\t\t\tSELECT\n\t\t\tCASE\n\t\t\t\t\t\n\t\t\t\tWHEN\n\t\t\t\t\ttt.type = 'task' THEN\n\t\t\t\t\t\tGROUP_CONCAT( tt.NAME SEPARATOR '>' ) ELSE CONCAT_WS( '', t2.`name`, '>', GROUP_CONCAT( tt.NAME SEPARATOR '>' ) ) \n\t\t\t\t\tEND AS `name` \n\t\t\t\tFROM\n\t\t\t\t\tzt_module tt\n\t\t\t\t\tLEFT JOIN zt_product t2 ON tt.root = t2.ID \n\t\t\t\tWHERE\n\t\t\t\t\tFIND_IN_SET( tt.id, t11.path )  and tt.deleted = '0'  \n\t\t\t\tGROUP BY\n\t\t\t\t\ttt.root \n\t\t\t\t\tLIMIT 0,\n\t\t\t\t\t1 \n\t\t\t\t) \n\t\t\tEND \n\t\t\t) AS `MODULENAME1`,\n\t\t\t(\n\t\t\tSELECT\n\t\t\tCASE\n\t\t\t\t\t\n\t\t\t\tWHEN\n\t\t\t\t\tcount( t.`id` ) > 0 THEN\n\t\t\t\t\t\t1 ELSE 0 \n\t\t\t\t\tEND \n\t\t\t\t\tFROM\n\t\t\t\t\t\t`zt_team` t \n\t\t\t\t\tWHERE\n\t\t\t\t\t\tt.`type` = 'task' \n\t\t\t\t\t\tAND t.`root` = t1.`ID` \n\t\t\t\t\t) AS `MULTIPLE`,\n\t\t\t\t\tt1.CONSUMED AS `MYCONSUMED`,\n\t\t\t\t\tt1.`NAME`,\n\t\t\t\t\tt1.`OPENEDBY`,\n\t\t\t\t\tt1.`OPENEDDATE`,\n\t\t\t\t\tt1.`PARENT`,\n\t\t\t\t\tt51.`NAME` AS `PARENTNAME`,\n\t\t\t\t\tt11.`PATH`,\n\t\t\t\t\tt1.`PRI`,\n\t\t\t\t\tt21.`PRODUCT`,\n\t\t\t\t\tt41.`NAME` AS `PRODUCTNAME`,\n\t\t\t\t\tCONCAT_WS(\n\t\t\t\t\t\t'',\n\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tWHEN t1.consumed = 0 \n\t\t\t\t\t\t\tOR t1.consumed IS NULL THEN\n\t\t\t\t\t\t\t\t'0' \n\t\t\t\t\t\t\t\tWHEN t1.`left` = 0 \n\t\t\t\t\t\t\t\tOR t1.`left` IS NULL THEN\n\t\t\t\t\t\t\t\t\t'100' ELSE ROUND( ( ROUND( t1.`consumed` / ( t1.`left` + t1.consumed ), 2 ) ) * 100 ) \n\t\t\t\t\t\t\t\tEND,\n\t\t\t\t\t\t\t\t'%' \n\t\t\t\t\t\t\t) AS `PROGRESSRATE`,\n\t\t\t\t\t\t\tt1.`PROJECT`,\n\t\t\t\t\t\t\tt31.`NAME` AS `PROJECTNAME`,\n\t\t\t\t\t\t\tt1.`REALSTARTED`,\n\t\t\t\t\t\t\tt1.`STATUS`,\n\t\t\t\t\t\t\t( CASE WHEN t1.storyVersion < t21.version AND t21.`status` <> 'changed' THEN 'storychange' ELSE t1.`status` END ) AS `STATUS1`,\n\t\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tWHEN t1.`status` = 'wait' THEN\n\t\t\t\t\t\t\t\t10 \n\t\t\t\t\t\t\t\tWHEN t1.`status` = 'doing' THEN\n\t\t\t\t\t\t\t\t20 \n\t\t\t\t\t\t\t\tWHEN t1.`status` = 'done' THEN\n\t\t\t\t\t\t\t\t30 \n\t\t\t\t\t\t\t\tWHEN t1.`status` = 'closed' THEN\n\t\t\t\t\t\t\t\t40 \n\t\t\t\t\t\t\t\tWHEN t1.`status` = 'cancel' THEN\n\t\t\t\t\t\t\t\t50 ELSE 60 \n\t\t\t\t\t\t\tEND AS `STATUSORDER`,\n\t\t\t\t\t\t\tt1.`STORY`,\n\t\t\t\t\t\t\tt21.`TITLE` AS `STORYNAME`,\n\t\t\t\t\t\t\tt1.`STORYVERSION`,\n\t\t\t\t\t\t\tt1.`SUBSTATUS`,\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tWHEN (\n\t\t\t\t\t\t\t\t\tSELECT\n\t\t\t\t\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tWHEN\n\t\t\t\t\t\t\t\t\t\t\tcount( t.`id` ) > 0 THEN\n\t\t\t\t\t\t\t\t\t\t\t\t1 ELSE 0 \n\t\t\t\t\t\t\t\t\t\t\tEND \n\t\t\t\t\t\t\t\t\t\t\tFROM\n\t\t\t\t\t\t\t\t\t\t\t\t`zt_team` t \n\t\t\t\t\t\t\t\t\t\t\tWHERE\n\t\t\t\t\t\t\t\t\t\t\t\tt.`type` = 'task' \n\t\t\t\t\t\t\t\t\t\t\t\tAND t.`root` = t1.`ID` \n\t\t\t\t\t\t\t\t\t\t\t\t) = 1 THEN\n\t\t\t\t\t\t\t\t\t\t\t\t'10' \n\t\t\t\t\t\t\t\t\t\t\t\tWHEN t1.parent = - 1 THEN\n\t\t\t\t\t\t\t\t\t\t\t\t'20' \n\t\t\t\t\t\t\t\t\t\t\t\tWHEN t1.parent = 0 THEN\n\t\t\t\t\t\t\t\t\t\t\t\t'30' ELSE '40' \n\t\t\t\t\t\t\t\t\t\t\tEND \n\t\t\t\t\t\t\t\t\t\t\t) AS `TASKTYPE`,\n\t\t\t\t\t\t\t\t\t\t\tt1.`TYPE`,\n\t\t\t\t\t\t\t\t\t\t\tDATE_FORMAT( t1.lastediteddate, '%Y-%m-%d' ) AS `UPDATEDATE`,\n\t\t\t\t\t\t\t\t\t\t\tt1.`PLAN`,\n\t\t\t\t\t\t\t\t\t\t\tt61.`TITLE` AS `PLANNAME` \n\t\t\t\t\t\t\t\t\t\tFROM\n\t\t\t\t\t\t\t\t\t\t\t`zt_task` t1\n\t\t\t\t\t\t\t\t\t\t\tLEFT JOIN zt_module t11 ON t1.MODULE = t11.ID\n\t\t\t\t\t\t\t\t\t\t\tLEFT JOIN zt_story t21 ON t1.STORY = t21.ID\n\t\t\t\t\t\t\t\t\t\t\tLEFT JOIN zt_project t31 ON t1.PROJECT = t31.ID\n\t\t\t\t\t\t\t\t\t\t\tLEFT JOIN zt_product t41 ON t21.PRODUCT = t41.ID\n\t\t\t\t\t\t\t\t\t\tLEFT JOIN zt_task t51 ON t1.PARENT = t51.ID\nLEFT JOIN `zt_productplan` t61 ON t1.`PLAN` = t61.`ID`",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Task/PSDEDATAQUERIES/ChildTask/PSDEDQCODES/MYSQL5.json"
}