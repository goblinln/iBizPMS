{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "(t1.Today = #{srf.n_today_eq} or t1.yesterday = #{srf.n_yesterday_eq} or t1.thisweek= #{srf.n_thisweek_eq} or t1.lastweek= #{srf.n_lastweek_eq} or t1.thismonth = #{srf.n_thismonth_eq} or t1.lastmonth= #{srf.n_lastmonth_eq} or (#{srf.n_today_eq} is null and #{srf.n_yesterday_eq} is null and #{srf.n_thisweek_eq} is null and #{srf.n_lastweek_eq} is null and #{srf.n_thismonth_eq} is null and  \n #{srf.n_lastmonth_eq} is null ))",
    "name" : "查询条件"
  } ],
  "getPSDEDataQueryCodeExps" : [ {
    "expression" : "t1.`COMMENT`",
    "name" : "COMMENT"
  }, {
    "expression" : "t1.`EXTRA`",
    "name" : "EXTRA"
  }, {
    "expression" : "t1.`ACTION`",
    "name" : "ACTION"
  }, {
    "expression" : "t1.`ACTOR`",
    "name" : "ACTOR"
  }, {
    "expression" : "t1.`DATE`",
    "name" : "DATE"
  }, {
    "expression" : "t1.`ID`",
    "name" : "ID"
  }, {
    "expression" : "t1.`OBJECTID`",
    "name" : "OBJECTID"
  }, {
    "expression" : "t1.`OBJECTTYPE`",
    "name" : "OBJECTTYPE"
  }, {
    "expression" : "t1.`PRODUCT`",
    "name" : "PRODUCT"
  }, {
    "expression" : "t1.`PROJECT`",
    "name" : "PROJECT"
  }, {
    "expression" : "t1.`READ`",
    "name" : "READ"
  } ],
  "queryCode" : "select t1.* from (\nSELECT\nt1.`ACTION`,\nt1.actor as actor,\nt1.`DATE`,\nt1.`ID`,\nt1.id as srfkey,\nt1.`OBJECTID`,\nt1.`OBJECTTYPE`,\nt1.`PRODUCT`,\nt1.`PROJECT`,\nt1.`READ`,\nt1.extra,\ncase when t1.objectType in ('bug','story','release') and t1.action in ('changestatus','resolved','closed', 'reviewed') and t1.extra <> '' then CONCAT_WS('_',t1.objectType,t1.action,t1.extra) else '' end as ActionManner,\n(case when DATE_FORMAT(t1.date,'%Y-%m-%d') = DATE_FORMAT(now(),'%Y-%m-%d') then '1' end) as Today,\n(case when DATE_FORMAT(t1.date,'%Y-%m-%d') = DATE_FORMAT(DATE_ADD(now(),INTERVAL -1 DAY),'%Y-%m-%d') then '1' end) as yesterday,\n(case when YEARWEEK(now()) = YEARWEEK(t1.date) then '1' end) as thisweek,\n(case when YEARWEEK(DATE_ADD(now(),INTERVAL -1 WEEK)) = YEARWEEK(t1.date) then '1' end) as lastweek,\n(case when DATE_FORMAT(t1.date,'%Y-%m') = DATE_FORMAT(now(),'%Y-%m') then '1' end) as thismonth,\n(case when DATE_FORMAT(t1.date,'%Y-%m') = DATE_FORMAT(DATE_ADD(now(),INTERVAL -1 MONTH),'%Y-%m') then '1' end) as lastmonth,\nt1.ACTIONSN,\nt1.SRFDCID\nFROM `zt_action` t1 where ( t1.`PRODUCT` LIKE CONCAT('%,',${srfdatacontext('srfparentkey','{\"defname\":\"PRODUCT\",\"dename\":\"ZT_ACTION\"}')},',%') ) ) t1\n",
  "id" : "PSMODULES/zentao/PSDATAENTITIES/Action/PSDEDATAQUERIES/ProductTrends/PSDEDQCODES/MYSQL5.json"
}