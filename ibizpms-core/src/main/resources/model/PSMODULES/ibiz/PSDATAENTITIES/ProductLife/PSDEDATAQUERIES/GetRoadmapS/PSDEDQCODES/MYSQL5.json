{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "queryCode" : "SELECT * FROM ( ( SELECT t111.* FROM ( SELECT CONCAT( t1.product, '-productplan-', t1.id ) AS ibz_productlifeid, CASE WHEN t11.title IS NULL THEN t1.title ELSE CONCAT(t11.title, '/', t1.title) END AS ibz_productlifename, t1.product AS product, t1.branch AS branch, t1.parent AS parent, 'productplan' AS type, t1.`begin` AS `begin`, t1.`end` AS `end`, LEFT (t1.`end`, 4) AS `year`, null AS marker FROM zt_productplan t1 LEFT JOIN zt_productplan t11 ON t1.parent = t11.id WHERE t1.DELETED = '0' AND t1.product = ${srfdatacontext('product','{\"defname\":\"product\",\"dename\":\"IBZ_PRODUCTLIFE\"}')} AND t1.parent != '-1' AND (#{srf.datacontext.branch} is null or t1.branch = #{srf.datacontext.branch}) AND LEFT (t1.`end`, 4) = ${srfdatacontext('year','{\"defname\":\"year\",\"dename\":\"IBZ_PRODUCTLIFE\"}')} ) t111, ( SELECT ( CASE WHEN max(date) IS NULL THEN 0 ELSE max(date) END ) AS `lastdata` FROM zt_release WHERE DELETED = '0' AND product = ${srfdatacontext('product','{\"defname\":\"product\",\"dename\":\"IBZ_PRODUCTLIFE\"}')} AND (#{srf.datacontext.branch} is null or branch = #{srf.datacontext.branch}) ) t112 WHERE t111.`end` > t112.lastdata ) UNION ( SELECT CONCAT( t2.product, '-release-', t2.id ) AS ibz_productlifeid, t2.`name` AS ibz_productlifename, t2.product AS product, t2.branch AS branch, null AS parent, 'release' AS type, t2.`date` AS `begin`, t2.`date` AS `end`, LEFT (t2.`date`, 4) AS `year`, t2.marker AS marker FROM zt_release t2 WHERE t2.DELETED = '0' AND t2.product = ${srfdatacontext('product','{\"defname\":\"product\",\"dename\":\"IBZ_PRODUCTLIFE\"}')} AND LEFT (t2.`date`, 4) = ${srfdatacontext('year','{\"defname\":\"year\",\"dename\":\"IBZ_PRODUCTLIFE\"}')} AND (#{srf.datacontext.branch} is null or t2.branch = #{srf.datacontext.branch}) ) ) AS ibz_productlife",
  "id" : "PSMODULES/ibiz/PSDATAENTITIES/ProductLife/PSDEDATAQUERIES/GetRoadmapS/PSDEDQCODES/MYSQL5.json"
}