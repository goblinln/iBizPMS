{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.account = #{srf.sessioncontext.srfloginname}",
    "name" : "查询条件"
  } ],
  "queryCode" : "select t1.account,CONCAT_WS('',CASE \n\tWHEN t21.`YEAR` is NULL THEN\n\t\t#{srf.webcontext.curyear}\n\tELSE\n\t\tt21.`YEAR`\nEND ,'-',t1.CURMONTH,'-01 00:00:00') as CURMONTH,case when t11.consumed is null then 0 else t11.consumed end as MONTESTIMATE,case when t11.MONTHFINISHTASK is null then 0 else t11.MONTHFINISHTASK end as MONTHFINISHTASK,case when t21.ss is null then 0 else t21.ss end as MONTRESOLVEDBUG   from (\nselect * from (select DISTINCT t1.actor as account,'01' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'02' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'03' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'04' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'05' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'06' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'07' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'08' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'09' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'10' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'11' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t\nUNION\nselect * from (select DISTINCT t1.actor as account,'12' as curmonth from zt_action t1 where t1.actor <> '' and t1.actor is not null) t) t1 left join (\nSELECT\n\tt11.account,\n\tt11.date,\n\tsum( t11.`consumed` ) AS `consumed`,\n\tCOUNT( t11.task ) AS MONTHFINISHTASK \nFROM\n\t(\nSELECT\n  DATE_FORMAT( t11.date, '%Y' ) AS `YEAR`,\n\tDATE_FORMAT( t11.date, '%m' ) AS date,\n\tt11.account,\n\tt11.`consumed`,\n\tt11.task \nFROM\n\tzt_taskestimate t11 \n\t) t11 \nWHERE\n\tt11.date NOT IN ( '00', '' ) and t11.`YEAR` = #{srf.webcontext.curyear}\nGROUP BY\n\tt11.account,\n\tt11.date ) t11 on t11.account = t1.account and t11.date = t1.curmonth\n\tleft join (\nSELECT\n\ttt.`YEAR`,\n\ttt.resolvedBy,\n\ttt.resolvedDate,\n\tCOUNT( 1 ) AS ss \nFROM\n\t( SELECT DATE_FORMAT( t.resolvedDate, '%Y' ) as `YEAR`,DATE_FORMAT( t.resolvedDate, '%m' ) AS resolvedDate, t.resolvedBy FROM zt_bug t WHERE t.resolvedBy <> '' ) tt \nWHERE\n\ttt.resolvedDate <> '00'  and tt.`YEAR` =   #{srf.webcontext.curyear}\nGROUP BY\n\ttt.resolvedBy,\n\ttt.resolvedDate ) t21 on t1.account = t21.resolvedBy AND t21.resolvedDate = t1.CURMONTH",
  "id" : "PSMODULES/ibiz/PSDATAENTITIES/UserYearWorkStats/PSDEDATAQUERIES/MonthFinishTaskAndBug/PSDEDQCODES/MYSQL5.json"
}