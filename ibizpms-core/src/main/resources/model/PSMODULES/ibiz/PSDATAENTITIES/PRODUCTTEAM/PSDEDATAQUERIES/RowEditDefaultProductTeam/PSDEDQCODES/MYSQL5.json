{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "t1.type = 'product'",
    "name" : "查询条件"
  } ],
  "getPSDEDataQueryCodeExps" : [ {
    "expression" : "t1.`ACCOUNT`",
    "name" : "ACCOUNT"
  }, {
    "expression" : "t1.`CONSUMED`",
    "name" : "CONSUMED"
  }, {
    "expression" : "t1.`DAYS`",
    "name" : "DAYS"
  }, {
    "expression" : "t1.`ESTIMATE`",
    "name" : "ESTIMATE"
  }, {
    "expression" : "t1.`HOURS`",
    "name" : "HOURS"
  }, {
    "expression" : "t1.`ID`",
    "name" : "ID"
  }, {
    "expression" : "t1.`JOIN`",
    "name" : "JOIN"
  }, {
    "expression" : "t1.`LEFT`",
    "name" : "LEFT"
  }, {
    "expression" : "t1.`LIMITED`",
    "name" : "LIMITED"
  }, {
    "expression" : "t1.`ORDER`",
    "name" : "ORDER"
  }, {
    "expression" : "t1.`ROLE`",
    "name" : "ROLE"
  }, {
    "expression" : "t1.`ROOT`",
    "name" : "ROOT"
  }, {
    "expression" : "(t1.`DAYS` * t1.`HOURS`)",
    "name" : "TOTAL"
  }, {
    "expression" : "t1.`TYPE`",
    "name" : "TYPE"
  }, {
    "expression" : "(select t.realname from zt_user t where t.account = t1.account)",
    "name" : "USERNAME"
  } ],
  "queryCode" : "SELECT\n\tt1.* \nFROM\n\t(\nSELECT\n\tt1.`ACCOUNT`,\n\tt1.`CONSUMED`,\n\tt1.`DAYS`,\n        t1.`end`,\n        t1.`LEADINGCADRE`,\n\tt1.`ESTIMATE`,\n\tt1.`HOURS`,\n\tt1.id as `ID`,\n\tt1.`JOIN`,\n\tt1.`LEFT`,\n\tt1.`LIMITED`,\n\tt1.`ORDER`,\n\tt1.`ROLE`,\n\tt1.`ROOT`,\n\t( t1.`DAYS` * t1.`HOURS` ) AS `TOTAL`,\n\tt1.`TYPE`,\n\tt2.`realname` AS `USERNAME` \nFROM\n\t`zt_team` t1\n\tLEFT JOIN `zt_user` t2 ON t2.`account` = t1.`account` \n\tunion \n\tSELECT\n\tt1.`ACCOUNT`,\n\t0 AS `CONSUMED`,\n\t((select SUM(tt.days) from zt_project tt where  FIND_IN_SET(tt.id,(SELECT GROUP_CONCAT(project) FROM zt_projectproduct where product = #{srf.datacontext.root} )\n\t)) )\n\tAS `DAYS`,\n        null as `end`,\n        null as `LEADINGCADRE`,\n\t0 AS `ESTIMATE`,\n\t7 AS `HOURS`,\n\tnull as `ID`,\n\t'2020-07-13' AS `JOIN`,\n\t0 AS `LEFT`,\n\t'no' AS `LIMITED`,\n\t0 AS `ORDER`,\n\tt3.`name` as `ROLE`,\n\t#{srf.datacontext.root} \n\tas `ROOT`,\n\t90 AS `TOTAL`,\n\t'product' AS `TYPE`,\n\tt2.`realname` AS `USERNAME` \nFROM\n\t`zt_team` t1\n\tLEFT JOIN `zt_user` t2 ON t2.`account` = t1.`account` \n        left join zt_group t3 on t2.role = t3.role\n\twhere t1.type = 'product' and t1.root = #{srf.datacontext.teams} \n\tand t1.account not in (select  t.account from zt_team t where t.root = #{srf.datacontext.root} \n\tand t.type = 'product')\n\tunion \n\tSELECT\n\tt2.`ACCOUNT`,\n\t0 AS `CONSUMED`,\n\t((select SUM(tt.days) from zt_project tt where  FIND_IN_SET(tt.id,(SELECT GROUP_CONCAT(project) FROM zt_projectproduct where product = #{srf.datacontext.root} )\n\t)) )\n\tAS `DAYS`,\n        null as `end`,\n        null as `LEADINGCADRE`,\n\t0 AS `ESTIMATE`,\n\t7 AS `HOURS`,\n\tnull as `ID`,\n\t'2020-07-13' AS `JOIN`,\n\t0 AS `LEFT`,\n\t'no' AS `LIMITED`,\n\t0 AS `ORDER`,\n\tt3.`name` as `ROLE`,\n\t#{srf.datacontext.root}\n\tas `ROOT`,\n\t90 AS `TOTAL`,\n\t'product' AS `TYPE`,\n\tt2.`realname` AS `USERNAME` \nFROM\n\t`zt_dept` t1\n\tLEFT JOIN `zt_user` t2 ON t2.`dept` = t1.`id` \n\tleft join zt_group t3 on t2.role = t3.role\n\twhere t1.id = #{srf.datacontext.dept} \n\tand t2.account is not null and t2.account not in (select  t.account from zt_team t where t.root = #{srf.datacontext.root} \n\tand t.type = 'product')\n\t) t1",
  "id" : "PSMODULES/ibiz/PSDATAENTITIES/PRODUCTTEAM/PSDEDATAQUERIES/RowEditDefaultProductTeam/PSDEDQCODES/MYSQL5.json"
}