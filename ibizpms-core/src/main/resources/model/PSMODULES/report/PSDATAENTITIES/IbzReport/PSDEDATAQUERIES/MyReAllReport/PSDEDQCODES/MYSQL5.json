{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "(t1.REPORTTO = #{srf.sessioncontext.srfloginname} or FIND_IN_SET(#{srf.sessioncontext.srfloginname},t1.MAILTO))",
    "name" : "查询条件"
  } ],
  "queryCode" : "select t1.* from (SELECT\nt1.`ACCOUNT`,\nt1.`CREATEDATE`,\nt1.`CREATEMAN`,\nt1.`CREATEMANNAME`,\nDATE_FORMAT(t1.DATE,'%Y-%m-%d') as `DATE`,\nt1.`IBZ_DAILYID`,\nt1.`IBZ_DAILYNAME`,\nt1.`ISSUBMIT`,\nt1.`MAILTO`,\n(case when t11.id is not null then '1' else '0' end ) as `REPORTSTATUS`,\nt1.`REPORTTO`,\nDATE_FORMAT(t1.SUBMITTIME,'%H:%i') as `SUBMITTIME`,\nt1.`TODAYTASK`,\nt1.`TOMORROWPLANSTASK`,\nt1.`UPDATEDATE`,\nt1.`UPDATEMAN`,\nt1.`UPDATEMANNAME`,\nCONCAT_WS('','今日工作：',case when t1.WORKTODAY is null then '无' else t1.WORKTODAY end) as WORKTODAY,\nt1.`COMMENT`,\nCONCAT_WS('','明日计划：',case when t1.PLANSTOMORROW is null then '无' else t1.PLANSTOMORROW end) AS PLANSTOMORROW,\n'daily' as type \nFROM `T_IBZ_DAILY` t1 \nleft join zt_action t11 on t11.objectID = t1.IBZ_DAILYID and t11.objectType = 'daily' and t11.action = 'read' and t11.actor = #{srf.sessioncontext.srfloginname}\nwhere t1.ISSUBMIT = '1'\nUNION\nSELECT\nt1.`ACCOUNT`,\nt1.`CREATEDATE`,\nt1.`CREATEMAN`,\nt1.`CREATEMANNAME`,\nDATE_FORMAT(t1.DATE,'%Y-%m-%d') as `DATE`,\nt1.`IBZ_WEEKLYID` as IBZ_DAILYID,\nt1.`IBZ_WEEKLYNAME` as IBZ_DAILYNAME,\nt1.`ISSUBMIT`,\nt1.`MAILTO`,\n(case when t11.id is not null then '1' else '0' end ) as `REPORTSTATUS`,\nt1.`REPORTTO`,\nDATE_FORMAT(t1.SUBMITTIME,'%H:%i') as `SUBMITTIME`,\nt1.`THISWEEKTASK` as TODAYTASK,\nt1.`NEXTWEEKTASK` as TOMORROWPLANSTASK,\nt1.`UPDATEDATE`,\nt1.`UPDATEMAN`,\nt1.`UPDATEMANNAME`,\nCONCAT_WS('','本周工作：',case when t1.WORKTHISWEEK is null then '无' else t1.WORKTHISWEEK end)  as WORKTODAY,\nt1.`COMMENT`,\nCONCAT_WS('','下周计划：',case when t1.PLANNEXTWEEK is null then '无' else t1.PLANNEXTWEEK end) as PLANSTOMORROW,\n'weekly' as type \nFROM `T_IBZ_WEEKLY` t1 \nleft join zt_action t11 on t11.objectID = t1.IBZ_WEEKLYID and t11.objectType = 'weekly' and t11.action = 'read' and t11.actor = #{srf.sessioncontext.srfloginname}\nwhere t1.ISSUBMIT = '1'\nUNION\nSELECT\nt1.`ACCOUNT`,\nt1.`CREATEDATE`,\nt1.`CREATEMAN`,\nt1.`CREATEMANNAME`,\nDATE_FORMAT(t1.DATE,'%Y-%m-%d') as `DATE`,\nt1.`IBZ_MONTHLYID` AS IBZ_DAILYID,\nt1.`IBZ_MONTHLYNAME` AS IBZ_DAILYNAME,\nt1.`ISSUBMIT`,\nt1.`MAILTO`,\n(case when t11.id is not null then '1' else '0' end ) as `REPORTSTATUS`,\nt1.`REPORTTO`,\nDATE_FORMAT(t1.SUBMITTIME,'%H:%i') as `SUBMITTIME`,\nt1.`THISMONTHTASK` AS TODAYTASK,\nt1.`NEXTMONTHPLANSTASK` AS TOMORROWPLANSTASK,\nt1.`UPDATEDATE`,\nt1.`UPDATEMAN`,\nt1.`UPDATEMANNAME`,\nCONCAT_WS('','本月工作：',case when t1.WORKTHISMONTH is null then '无' else t1.WORKTHISMONTH end)  as WORKTODAY,\nt1.`COMMENT`,\nCONCAT_WS('','下月计划：',case when t1.PLANSNEXTMONTH is null then '无' else t1.PLANSNEXTMONTH end) as PLANSTOMORROW,\n'monthly' as type \nFROM `T_IBZ_MONTHLY` t1\nleft join zt_action t11 on t11.objectID = t1.IBZ_MONTHLYID and t11.objectType = 'monthly' and t11.action = 'read' and t11.actor = #{srf.sessioncontext.srfloginname}\nwhere t1.ISSUBMIT = '1'\nUNION \nSELECT\nt1.`ACCOUNT`,\nt1.`CREATEDATE`,\nt1.`CREATEMAN`,\nnull as `CREATEMANNAME`,\nDATE_FORMAT(t1.DATE,'%Y-%m-%d') as `DATE`,\nt1.`IBZ_REPORTLYID` as IBZ_DAILYID,\nt1.`IBZ_REPORTLYNAME` as IBZ_DAILYNAME,\nt1.`ISSUBMIT`,\nt1.`MAILTO`,\n(case when t11.id is not null then '1' else '0' end ) as `REPORTSTATUS`,\nt1.`REPORTTO`,\nDATE_FORMAT(t1.SUBMITTIME,'%H:%i') as `SUBMITTIME`,\nnull as TODAYTASK,\nnull as TOMORROWPLANSTASK,\nt1.`UPDATEDATE`,\nt1.`UPDATEMAN`,\nnull as `UPDATEMANNAME`,\nCONCAT_WS('','工作内容：',case when t1.CONTENT is null then '无' else t1.CONTENT end) as WORKTODAY,\nnull as `COMMENT`,\nnull as PLANSTOMORROW,\n'reportly' as type \nFROM `T_IBZ_REPORTLY` t1 \nleft join zt_action t11 on t11.objectID = t1.IBZ_REPORTLYID and t11.objectType = 'reportly' and t11.action = 'read' and t11.actor = #{srf.sessioncontext.srfloginname}\nwhere t1.ISSUBMIT = '1'\n) t1",
  "id" : "PSMODULES/report/PSDATAENTITIES/IbzReport/PSDEDATAQUERIES/MyReAllReport/PSDEDQCODES/MYSQL5.json"
}